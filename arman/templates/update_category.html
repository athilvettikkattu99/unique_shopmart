<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link href='https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css'>
    <title>Update Category</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</head>

<body>

    <section>
        <div class="container mt-5" style="max-width:30rem;">
            <div class="row">
                <div class="col-lg-12 pt-4">
                    <div class="mx-auto d-block col-lg-12 col-md-8 login px-lg-3 border pt-3 pb-3">
                        <h2 class="text-center">Update Category</h2>
                        <br>
                        <form method="post" enctype="multipart/form-data">
                            {% csrf_token %}
                            <input type="text" name="name" class="form-control" placeholder="Category Name" required
                                value="{{ cat_data.name }}" autocomplete="off"><br>
                            <input type="text" name="description" class="form-control" placeholder="Description"
                                required value="{{ cat_data.description }}" autocomplete="off"><br>

                            <div class="input-group mb-3">
                                <div class="custom-file">
                                    <input type="file" class="custom-file-input" id="file" name="image" accept="image/*"
                                        onchange="document.getElementById('img').src = window.URL.createObjectURL(this.files[0])">
                                    <label class="custom-file-label" for="file">Choose file</label>
                                </div>
                            </div>
                            <div class="col-lg-12">
                                <img src="{{ cat_data.image.url }}" alt="{{ cat_data.image.url }}" class="img-fluid"
                                    id="img" style="width: 100%;height: 150px;">
                            </div>
                            <div id="imagePreview"></div>
                            <br>
                            <input type="submit" value="Update Category" class="btn btn-success form-control">
                        </form>
                        <br>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- <div class="container">

        <h1 class="mt-5">Update Category</h1>
        <div>
            <form action="" method="POST" enctype="multipart/form-data" id="categroy">
                {% csrf_token %}
                <label>Name</label>
                <input value="{{ cat_data.name }}" type="text" name="name" maxlength="20" placeholder="name"
                    autocomplete="off" required><br>
                <label>Description</label>
                <input value="{{ cat_data.description }}" type="text" name="description" maxlength="200"
                    autocomplete="off" placeholder="description" required><br>
                <label>Image</label>
                <input value="{{ cat_data.image }}" type="file" id="file" name="image" accept="image/*"
                    onchange="return fileValidation()" />
                <div class="col-lg-12">
                    <img src="{{ cat_data.image.url }}" alt="{{ cat_data.image.url }}" class="img-fluid" id="img"
                        style="width: 100%;height: 100%;">
                </div>
                <div id="imagePreview"></div>
                <div>
                    <button style="padding: 8px 40px;" class="btn btn-primary" type="submit">Submit</button><br>
                </div>
            </form>
        </div>
    </div> -->
</body>

</html>

{% if msg_success %}
<script>
    Swal.fire({
        position: 'center',
        icon: 'success',
        text: '{{ msg_success }}',
        showConfirmButton: false,
        timer: 1500
    }).then(function () {
        javascript: history.go(-2);
    })
</script>
{% endif %}
{% if msg_error %}
<script>
    alert("{{ msg_error }}");
    javascript: history.go(-1);
</script>
{% endif %}